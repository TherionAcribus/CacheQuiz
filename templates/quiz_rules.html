{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h2>Gestion des ensembles de règles du quiz</h2>
    <div class="header-actions">
        <button class="btn btn-primary"
                onclick="document.getElementById('rule-form-container').classList.remove('hidden')"
                hx-get="/quiz-rule/new"
                hx-target="#rule-form-container"
                hx-swap="innerHTML">
            + Nouveau set de règles
        </button>
    </div>
    <p class="text-muted">Créez plusieurs ensembles de règles (timer, difficultés, thèmes, scoring...) pour adapter le quiz à différents contextes (événements, modes).</p>
    <div class="inline-help">
        <span class="badge">Astuce</span> Utilisez le champ « slug » pour une identification lisible (ex: mode-expert).
    </div>
    <hr>
</div>

<div id="rule-form-container" class="hidden form-modal"></div>

<div id="quiz-rules-list"
     hx-get="/api/quiz-rules"
     hx-trigger="load"
     hx-swap="innerHTML">
    <div class="loading">Chargement des sets de règles...</div>
    <div class="skeleton-list"></div>
    <div class="skeleton-list"></div>
</div>

<style>
    .hidden{display:none}
    .form-modal{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000;display:flex;align-items:center;justify-content:center;padding:2rem;overflow:auto}
    .form-modal.hidden{display:none}
    .inline-help{font-size:.9rem;color:var(--text-light)}
    .skeleton-list{height:64px;background:linear-gradient(90deg,#eee,#f5f5f5,#eee);background-size:200% 100%;animation:skeleton 1.4s ease infinite;border-radius:.5rem;margin:.5rem 0}
    @keyframes skeleton{0%{background-position:200% 0}100%{background-position:-200% 0}}
    .text-muted{color:var(--text-light)}
    hr{border:0;border-top:1px solid var(--border-color);margin:.75rem 0}
    .badge{background:#eef2ff;color:#4338ca;border:1px solid #c7d2fe;padding:.15rem .4rem;border-radius:.25rem;font-weight:600}
}</style>
{% endblock %}



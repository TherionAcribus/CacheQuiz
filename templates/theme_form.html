<div class="form-wrapper">
    <div class="form-header">
        <h2>{% if theme %}Éditer le thème{% else %}Nouveau thème{% endif %}</h2>
        <button class="btn-close" 
                type="button"
                onclick="document.getElementById('theme-form-container').classList.add('hidden')">✕</button>
    </div>
    
    <form {% if theme %}
          hx-post="/api/theme/{{ theme.id }}"
          {% else %}
          hx-post="/api/theme"
          {% endif %}
          hx-target="#themes-list"
          hx-swap="innerHTML"
          hx-on::after-request="document.getElementById('theme-form-container').classList.add('hidden')">
        
        <div class="form-grid">
            <!-- Colonne gauche -->
            <div class="form-column">
                <div class="form-group">
                    <label for="name">Nom du thème *</label>
                    <input type="text" 
                           id="name" 
                           name="name" 
                           value="{{ theme.name if theme else '' }}"
                           placeholder="Ex: Règles, Histoire, Technique"
                           required>
                </div>
                
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea id="description" 
                              name="description" 
                              rows="4"
                              placeholder="Description du thème (optionnel)">{{ theme.description if theme else '' }}</textarea>
                </div>
                
                <div class="form-group">
                    <label for="language">Langue *</label>
                    <select id="language" name="language" required>
                        <option value="fr" {% if theme and theme.language == 'fr' %}selected{% elif not theme %}selected{% endif %}>🇫🇷 Français (fr)</option>
                        <option value="en" {% if theme and theme.language == 'en' %}selected{% endif %}>🇬🇧 English (en)</option>
                        <option value="de" {% if theme and theme.language == 'de' %}selected{% endif %}>🇩🇪 Deutsch (de)</option>
                        <option value="es" {% if theme and theme.language == 'es' %}selected{% endif %}>🇪🇸 Español (es)</option>
                        <option value="it" {% if theme and theme.language == 'it' %}selected{% endif %}>🇮🇹 Italiano (it)</option>
                        <option value="nl" {% if theme and theme.language == 'nl' %}selected{% endif %}>🇳🇱 Nederlands (nl)</option>
                        <option value="pt" {% if theme and theme.language == 'pt' %}selected{% endif %}>🇵🇹 Português (pt)</option>
                    </select>
                </div>
            </div>
            
            <!-- Colonne droite -->
            <div class="form-column">
                <div class="form-group">
                    <label for="icon">Icône (emoji)</label>
                    <input type="text" 
                           id="icon" 
                           name="icon" 
                           value="{{ theme.icon if theme else '' }}"
                           placeholder="Ex: 📚, 🗺️, ⚙️, 🎯"
                           maxlength="10">
                    <small>Utilisez un emoji pour représenter visuellement ce thème</small>
                </div>
                
                <div class="form-group">
                    <label for="color">Couleur</label>
                    <input type="color" 
                           id="color" 
                           name="color" 
                           value="{{ theme.color if theme and theme.color else '#3b82f6' }}">
                    <small>Couleur d'accent pour l'affichage du thème</small>
                </div>
                
                <div class="form-group">
                    <label for="translation_id">ID de traduction (thème lié)</label>
                    <input type="number" 
                           id="translation_id" 
                           name="translation_id" 
                           placeholder="ID du thème dans une autre langue"
                           value="{{ theme.translation_id if theme and theme.translation_id else '' }}">
                    <small>Utilisé pour lier des thèmes dans différentes langues</small>
                </div>
                
                {% if theme %}
                <div class="form-info">
                    <p><strong>Statistiques:</strong></p>
                    <p>Questions utilisant ce thème: {{ theme.questions.count() }}</p>
                    <p>ID: {{ theme.id }}</p>
                    <p>Créé: {{ theme.created_at.strftime('%d/%m/%Y %H:%M') if theme.created_at }}</p>
                </div>
                {% endif %}
            </div>
        </div>
        
        <div class="form-actions">
            <button type="button" 
                    class="btn btn-secondary"
                    onclick="document.getElementById('theme-form-container').classList.add('hidden')">
                Annuler
            </button>
            <button type="submit" class="btn btn-primary">
                {% if theme %}Mettre à jour{% else %}Créer{% endif %}
            </button>
        </div>
    </form>
</div>

<style>
    input[type="color"] {
        width: 100%;
        height: 50px;
        border: 2px solid var(--border-color);
        border-radius: 0.5rem;
        cursor: pointer;
    }
    
    input[type="color"]:focus {
        outline: none;
        border-color: var(--primary-color);
    }
</style>

